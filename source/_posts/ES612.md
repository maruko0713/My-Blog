---
title: ES6å­¦ä¹ ç¬”è®°12:è¿­ä»£å™¨å’Œç”Ÿæˆå™¨
date: 2016-12-21
tag: "ES6"
---
## å‰è¨€
ES6ä¸­ï¼Œå¼•å…¥äº†è¿­ä»£å™¨å’Œç”Ÿæˆå™¨çš„æ¦‚å¿µã€‚   
ä¹…è¿äº†çš„åå­—ï¼Œä¸Šæ¬¡è§åˆ°è¿˜æ˜¯åœ¨ã€ŠPythonæ ¸å¿ƒç¼–ç¨‹ã€‹é‡Œå‘ï¼     
æ‰€ä»¥è¯´JSè¶Šæ¥è¶Šæ­£ç»Ÿè¯­è¨€äº†å‘€ï½ï½ï½    
    
## è¿­ä»£å™¨(Iterators)ç¢ç¢å¿µ
è¿­ä»£å™¨å°±æ˜¯å¯ä»¥è¿­ä»£è¾“å‡ºå€¼çš„ä¸€ä¸ªä¸œè¥¿ã€‚    
è¿­ä»£å™¨æ¯ä¸€æ¬¡è¿­ä»£ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é•¿è¿™æ ·å­ï¼š   
   
```js
{value: xx, done: true/false}
```

valueè¡¨ç¤ºè¿”å›çš„å€¼ï¼Œ doneè¡¨ç¤ºè¿˜æœ‰æ²¡æœ‰å¯ä»¥è¿­ä»£çš„ä¸œè¥¿ã€‚    
å¦‚æœè¿˜å¯ä»¥è¿­ä»£ï¼Œé‚£ä¹ˆå°±æ˜¯true,å¦åˆ™æ˜¯falseã€‚   
   
ç„¶åè¿­ä»£å™¨é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå…³é”®è§‰å¾—å°±æ˜¯next()æ–¹æ³•ï¼Œå®ƒæ˜¯ç”¨æ¥è¿›è¡Œä¸‹ä¸€æ¬¡è¿­ä»£ç”¨çš„ã€‚    
    
å…·å¤‡ä»¥ä¸Šè¦ç´ çš„ä¸œè¥¿ï¼Œå°±æ˜¯è¿­ä»£å™¨ã€‚    
    
## æ‰‹å·¥åˆ›é€ è¿­ä»£å™¨
æ‰‹å†™ä¸€ä¸ªè¿­ä»£å™¨æ¥çœ‹ï¼    
    
```js
'use strict'

function chef(foods) {
  let i = 0;
  return {
    next() {
      let done = (i >= foods.length);
      let value = !done? foods[i++] : undefined;

      return {
        value: value,
        done:done
      }
    }
  }
}

let wanzi = chef(["ğŸ…", "ğŸ¹"]);
console.log(wanzi.next());
console.log(wanzi.next());
console.log(wanzi.next());
```

é¡ºåºè¾“å‡ºçš„åˆ†åˆ«æ˜¯

```js
{value: ğŸ…, done: false}
{value: ğŸ¹, done: false}
{value: undefined, done:true}
```

è¿™ä¸Šé¢ï¼Œwanziå°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚    
    
## ç”Ÿæˆå™¨(generators)ç¢ç¢å¿µ
æ¥¼ä¸Šé‚£æ®µä»£ç é‡Œé¢ï¼Œç”Ÿæˆè¿­ä»£å™¨çš„é‚£ä¸ªæ„é€ å‡½æ•°ï¼Œå°±å«åšç”Ÿæˆå™¨ã€‚    
æ‰‹åŠ¨å†™ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¤Ÿéº»çƒ¦äº†ã€‚    
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•ç®€å•åœ°åšå‡ºä¸€ä¸ªç”Ÿæˆå™¨:   
    
```js
'use strict'

function* chef() {
  yield "ğŸ…";
  yield "ğŸ¹";
}

let wanzi = chef();

console.log(wanzi.next());
console.log(wanzi.next());
console.log(wanzi.next());
```

æ¥¼ä¸Šè¿™æ®µä»£ç ï¼Œè¾“å‡ºçš„ä¸œè¥¿å’Œä¸Šé¢æˆ‘ä»¬æ‰‹å†™è¾“å‡ºçš„ä¸œè¥¿ä¸€æ¯›ä¸€æ ·ï¼ï¼   
    
è®©chefç”Ÿæˆå™¨è¿›åŒ–ä¸€ä¸‹ï¼š    
    
```js
'use strict'

let chef = function* (foods) {
  for(var i = 0; i < foods.length; i++) {
    yield foods[i];
  }
}

let wanzi = chef(["ğŸ…", "ğŸ¹"]);

console.log(wanzi.next());
console.log(wanzi.next());
console.log(wanzi.next());
```

æ¥¼ä¸Šè¿™æ®µä»£ç ï¼Œå’Œæ¥¼ä¸Šçš„æ¥¼ä¸Šï¼Œæ¥¼ä¸Šçš„æ¥¼ä¸Šçš„æ¥¼ä¸Šå®ç°çš„æ•ˆæœä¸€æ¯›ä¸€æ ·ã€‚    
å› æ­¤æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªç”Ÿæˆå™¨å…¶å®è¿˜æ˜¯å‡½æ•°ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨å‡½æ•°å®šä¹‰è¡¨è¾¾å¼ï¼Œå¯ä»¥ä¼ å‚ã€‚    
    
## ç»“è¯­
ä¸Šä¸€æ¬¡æ¥è§¦åˆ°ç”Ÿæˆå™¨å’Œè¿­ä»£å™¨ï¼Œè¿˜æ˜¯åœ¨å­¦pythonçš„æ—¶å€™ï¼ˆ15å¹´çš„æš‘å‡ï¼‰ã€‚    
æ—¶é—´è¿‡çš„çœŸå¿«å•Šã€‚    
JSä¸€ç›´åœ¨è¿›æ­¥ï¼Œè‡ªå·±æ¯ä¸€å¤©ä¹Ÿè¦åŠªåŠ›è¿›æ­¥å•Šï½ï½


